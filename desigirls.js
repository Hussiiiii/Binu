const playlist = [
  { file: "music/desigirls/Jale 2 - Shiva Choudhary Sapna Choudhary.mp3", title: "Jale 2", cover: "images/desigirls/Jale 2.jpg" },
  { file: "music/desigirls/52 Gaj Ka Daman - Renuka Panwar MJ.mp3", title: "52 Gaj Ka Daman", cover: "images/desigirls/52 Gaj Ka Daman.jpg" },
  { file: "music/desigirls/Matak Chalungi - Raj Mawar Manisha Sharma Aman Jaji Sapna Choudhary.mp3", title: "Matak Chalungi", cover: "images/desigirls/Matak Chalungi.jpg" },
  { file: "music/desigirls/Solid Body - Raju Punjabi Sheenam Katholic.mp3", title: "Solid Body", cover: "images/desigirls/Solid Body.jpg" },
  { file: "music/desigirls/Jale.mp3", title: "Jale", cover: "images/desigirls/Jale.jpg" },
  { file: "music/desigirls/Bandook 2.mp3", title: "Bandook 2", cover: "images/desigirls/Bandook 2.jpg" },
  { file: "music/desigirls/Kallo FeatAjay HoodaPardeep Boora.mp3", title: "Kallo (Feat.Ajay Hooda,Pardeep Boora)", cover: "images/desigirls/Kallo FeatAjay HoodaPardeep Boora.jpg" },
  { file: "music/desigirls/Tu Cheez Lajwab.mp3", title: "Tu Cheez Lajwab", cover: "images/desigirls/Tu Cheez Lajwab.jpg" },
  { file: "music/desigirls/Naam Tera.mp3", title: "Naam Tera", cover: "images/desigirls/Naam Tera.jpg" },
  { file: "music/desigirls/Dhai Litar Dudh.mp3", title: "Dhai Litar Dudh", cover: "images/desigirls/Dhai Litar Dudh.jpg" },
  { file: "music/desigirls/Teri Lat Lag Ja Gi.mp3", title: "Teri Lat Lag Ja Gi", cover: "images/desigirls/Teri Lat Lag Ja Gi.jpg" },
  { file: "music/desigirls/Fevicol Se.mp3", title: "Fevicol Se", cover: "images/desigirls/Fevicol Se.jpg" },
  { file: "music/desigirls/Munni Badnaam.mp3", title: "Munni Badnaam", cover: "images/desigirls/Munni Badnaam.jpg" },
  { file: "music/desigirls/Hookah Bar.mp3", title: "Hookah Bar", cover: "images/desigirls/Hookah Bar.jpg" },
  { file: "music/desigirls/Chikni Chameli.mp3", title: "Chikni Chameli", cover: "images/desigirls/Chikni Chameli.jpg" },
  { file: "music/desigirls/Le Le Mazaa Le.mp3", title: "Le Le Mazaa Le", cover: "images/desigirls/Le Le Mazaa Le.jpg" },
  { file: "music/desigirls/Beedi.mp3", title: "Beedi", cover: "images/desigirls/Beedi.jpg" },
  { file: "music/desigirls/Character Dheela - Pritam.mp3", title: "Character Dheela", cover: "images/desigirls/Character Dheela.jpg" },
  { file: "music/desigirls/Chhaliya - Vishal-Shekhar.mp3", title: "Chhaliya", cover: "images/desigirls/Chhaliya.jpg" },
  { file: "music/desigirls/Jhalak Dikhla Ja.mp3", title: "Jhalak Dikhla Ja", cover: "images/desigirls/Jhalak Dikhla Ja.jpg" },
  { file: "music/desigirls/Tinku Jiya.mp3", title: "Tinku Jiya", cover: "images/desigirls/Tinku Jiya.jpg" },
  { file: "music/desigirls/Jeene Ke Hain Chaar Din.mp3", title: "Jeene Ke Hain Chaar Din", cover: "images/desigirls/Jeene Ke Hain Chaar Din.jpg" },
  { file: "music/desigirls/Anarkali Disco Chali.mp3", title: "Anarkali Disco Chali", cover: "images/desigirls/Anarkali Disco Chali.jpg" },
  { file: "music/desigirls/Tere Naal Nachna From Nawabzaade.mp3", title: "Tere Naal Nachna (From  Nawabzaade )", cover: "images/desigirls/Tere Naal Nachna From Nawabzaade.jpg" },
  { file: "music/desigirls/Pinky From Zanjeer.mp3", title: "Pinky (From  Zanjeer )", cover: "images/desigirls/Pinky From Zanjeer.jpg" },
  { file: "music/desigirls/Tareefan.mp3", title: "Tareefan", cover: "images/desigirls/Tareefan.jpg" },
  { file: "music/desigirls/No Entry Ishq Di Galli Vich.mp3", title: "No Entry: Ishq Di Galli Vich", cover: "images/desigirls/No Entry Ishq Di Galli Vich.jpg" },
  { file: "music/desigirls/Right Now Now.mp3", title: "Right Now Now", cover: "images/desigirls/Right Now Now.jpg" },
  { file: "music/desigirls/Lovely - Kanika Kapoor.mp3", title: "Lovely", cover: "images/desigirls/Lovely.jpg" },
  { file: "music/desigirls/Mercy - Badshah.mp3", title: "Mercy", cover: "images/desigirls/Mercy.jpg" },
  { file: "music/desigirls/Buzz feat Badshah.mp3", title: "Buzz (feat. Badshah)", cover: "images/desigirls/Buzz feat Badshah.jpg" },
  { file: "music/desigirls/Oh Girl Youre Mine .mp3", title: "Oh Girl You're Mine", cover: "images/desigirls/Oh Girl Youre Mine.jpg" },
  { file: "music/desigirls/Ude Dil Befikre.mp3", title: "Ude Dil Befikre", cover: "images/desigirls/Ude Dil Befikre.jpg" },
  { file: "music/desigirls/Dance Basanti.mp3", title: "Dance Basanti", cover: "images/desigirls/Dance Basanti.jpg" },
  { file: "music/desigirls/Gulaabo.mp3", title: "Gulaabo", cover: "images/desigirls/Gulaabo.jpg" },
  { file: "music/desigirls/Besharmi Ki Height.mp3", title: "Besharmi Ki Height", cover: "images/desigirls/Besharmi Ki Height.jpg" },
  { file: "music/desigirls/High Heels Te Nachche From Ki amp Ka feat Jaz Dhami Aditi Singh Sharma.mp3", title: "High Heels Te Nachche (From  Ki & Ka ) (feat. Jaz Dhami, Aditi Singh Sharma)", cover: "images/desigirls/High Heels Te Nachche From Ki amp Ka feat Jaz Dhami Aditi Singh Sharma.jpg" },
  { file: "music/desigirls/Ucha Lamba Kad.mp3", title: "Ucha Lamba Kad", cover: "images/desigirls/Ucha Lamba Kad.jpg" },
  { file: "music/desigirls/Paisa.mp3", title: "Paisa", cover: "images/desigirls/Paisa.jpg" },
  { file: "music/desigirls/Zara Zara Touch Me.mp3", title: "Zara Zara Touch Me", cover: "images/desigirls/Zara Zara Touch Me.jpg" },
  { file: "music/desigirls/Bebo.mp3", title: "Bebo", cover: "images/desigirls/Bebo.jpg" },
  { file: "music/desigirls/Crazy Kiya Re.mp3", title: "Crazy Kiya Re", cover: "images/desigirls/Crazy Kiya Re.jpg" },
  { file: "music/desigirls/Afghan Jalebi Film Version.mp3", title: "Afghan Jalebi (Film Version)", cover: "images/desigirls/Afghan Jalebi Film Version.jpg" },
  { file: "music/desigirls/Mummy Nu Pasand From Jai Mummy Di.mp3", title: "Mummy Nu Pasand (From  Jai Mummy Di )", cover: "images/desigirls/Mummy Nu Pasand From Jai Mummy Di.jpg" },
  { file: "music/desigirls/Kajra Re.mp3", title: "Kajra Re", cover: "images/desigirls/Kajra Re.jpg" },
  { file: "music/desigirls/Mashallah.mp3", title: "Mashallah", cover: "images/desigirls/Mashallah.jpg" },
  { file: "music/desigirls/Mungda.mp3", title: "Mungda", cover: "images/desigirls/Mungda.jpg" },
  { file: "music/desigirls/Galat Baat Hai.mp3", title: "Galat Baat Hai", cover: "images/desigirls/Galat Baat Hai.jpg" },
  { file: "music/desigirls/Touch Me.mp3", title: "Touch Me", cover: "images/desigirls/Touch Me.jpg" },
  { file: "music/desigirls/Long Drive.mp3", title: "Long Drive", cover: "images/desigirls/Long Drive.jpg" },
  { file: "music/desigirls/Aa Re Pritam Pyaare.mp3", title: "Aa Re Pritam Pyaare", cover: "images/desigirls/Aa Re Pritam Pyaare.jpg" },
  { file: "music/desigirls/Thug Le.mp3", title: "Thug Le", cover: "images/desigirls/Thug Le.jpg" },
  { file: "music/desigirls/Tera Ishq Bada Teekha.mp3", title: "Tera Ishq Bada Teekha", cover: "images/desigirls/Tera Ishq Bada Teekha.jpg" },
  { file: "music/desigirls/The Disco Song.mp3", title: "The Disco Song", cover: "images/desigirls/The Disco Song.jpg" },
  { file: "music/desigirls/Halkat Jawani.mp3", title: "Halkat Jawani", cover: "images/desigirls/Halkat Jawani.jpg" },
  { file: "music/desigirls/Aashiq Banaya Aapne.mp3", title: "Aashiq Banaya Aapne", cover: "images/desigirls/Aashiq Banaya Aapne.jpg" },
  { file: "music/desigirls/O Saki Saki From Batla House.mp3", title: "O Saki Saki (From  Batla House )", cover: "images/desigirls/O Saki Saki From Batla House.jpg" },
  { file: "music/desigirls/Second Hand Jawaani.mp3", title: "Second Hand Jawaani", cover: "images/desigirls/Second Hand Jawaani.jpg" },
  { file: "music/desigirls/Husn Parcham.mp3", title: "Husn Parcham", cover: "images/desigirls/Husn Parcham.jpg" },
  { file: "music/desigirls/Ainvayi Ainvayi.mp3", title: "Ainvayi Ainvayi", cover: "images/desigirls/Ainvayi Ainvayi.jpg" },
  { file: "music/desigirls/Twist.mp3", title: "Twist", cover: "images/desigirls/Twist.jpg" },
  { file: "music/desigirls/Ghagra.mp3", title: "Ghagra", cover: "images/desigirls/Ghagra.jpg" },
  { file: "music/desigirls/Lucky Boy.mp3", title: "Lucky Boy", cover: "images/desigirls/Lucky Boy.jpg" },
  { file: "music/desigirls/Caller Tune.mp3", title: "Caller Tune", cover: "images/desigirls/Caller Tune.jpg" },
  { file: "music/desigirls/Dance Like.mp3", title: "Dance Like", cover: "images/desigirls/Dance Like.jpg" },
  { file: "music/desigirls/Manali Trance.mp3", title: "Manali Trance", cover: "images/desigirls/Manali Trance.jpg" },
  { file: "music/desigirls/Manma Emotion Jaage.mp3", title: "Manma Emotion Jaage", cover: "images/desigirls/Manma Emotion Jaage.jpg" },
  { file: "music/desigirls/Dil Mera Muft Ka.mp3", title: "Dil Mera Muft Ka", cover: "images/desigirls/Dil Mera Muft Ka.jpg" },
  { file: "music/desigirls/Dilbar From Satyameva Jayate.mp3", title: "Dilbar (From  Satyameva Jayate )", cover: "images/desigirls/Dilbar From Satyameva Jayate.jpg" },
  { file: "music/desigirls/Naagin.mp3", title: "Naagin", cover: "images/desigirls/Naagin.jpg" },
  { file: "music/desigirls/Bhool Bhulaiyaa.mp3", title: "Bhool Bhulaiyaa", cover: "images/desigirls/Bhool Bhulaiyaa.jpg" },
  { file: "music/desigirls/Love Mera Hit Hit.mp3", title: "Love Mera Hit Hit", cover: "images/desigirls/Love Mera Hit Hit.jpg" },
  { file: "music/desigirls/Aahun Aahun.mp3", title: "Aahun Aahun", cover: "images/desigirls/Aahun Aahun.jpg" },
  { file: "music/desigirls/Haan Main Galat.mp3", title: "Haan Main Galat", cover: "images/desigirls/Haan Main Galat.jpg" },
  { file: "music/desigirls/Marjaani.mp3", title: "Marjaani", cover: "images/desigirls/Marjaani.jpg" },
  { file: "music/desigirls/Sunny Sunny From Yaariyan.mp3", title: "Sunny Sunny (From  Yaariyan )", cover: "images/desigirls/Sunny Sunny From Yaariyan.jpg" },
  { file: "music/desigirls/Baby Doll - Meet Bros Anjjan.mp3", title: "Baby Doll", cover: "images/desigirls/Baby Doll.jpg" },
  { file: "music/desigirls/Laung Da Lashkara.mp3", title: "Laung Da Lashkara", cover: "images/desigirls/Laung Da Lashkara.jpg" },
  { file: "music/desigirls/One Two Three Four _Get On The Dance Floor_ - Vishal-Shekhar.mp3", title: "One Two Three Four (Get On The Dance Floor)", cover: "images/desigirls/One Two Three Four Get On The Dance Floor.jpg" },
  { file: "music/desigirls/Chittiyaan Kalaiyaan.mp3", title: "Chittiyaan Kalaiyaan", cover: "images/desigirls/Chittiyaan Kalaiyaan.jpg" },
  { file: "music/desigirls/Aayi Nai From Stree 2.mp3", title: "Aayi Nai (From  Stree 2 )", cover: "images/desigirls/Aayi Nai From Stree 2.jpg" },
  { file: "music/desigirls/Laila Main Laila.mp3", title: "Laila Main Laila", cover: "images/desigirls/Laila Main Laila.jpg" },
  { file: "music/desigirls/Gali Gali From Kgf Chapter 1.mp3", title: "Gali Gali (From  Kgf Chapter 1 )", cover: "images/desigirls/Gali Gali From Kgf Chapter 1.jpg" },
  { file: "music/desigirls/Lat Lag Gayee.mp3", title: "Lat Lag Gayee", cover: "images/desigirls/Lat Lag Gayee.jpg" },
  { file: "music/desigirls/Kaun Nachdi - Guru Randhawa.mp3", title: "Kaun Nachdi", cover: "images/desigirls/Kaun Nachdi.jpg" },
  { file: "music/desigirls/Pink Lips.mp3", title: "Pink Lips", cover: "images/desigirls/Pink Lips.jpg" },
  { file: "music/desigirls/Daddy Mummy.mp3", title: "Daddy Mummy", cover: "images/desigirls/Daddy Mummy.jpg" },
  { file: "music/desigirls/Oye Oye.mp3", title: "Oye Oye", cover: "images/desigirls/Oye Oye.jpg" },
  { file: "music/desigirls/Do U Know.mp3", title: "Do U Know", cover: "images/desigirls/Do U Know.jpg" },
  { file: "music/desigirls/Laal Dupatta.mp3", title: "Laal Dupatta", cover: "images/desigirls/Laal Dupatta.jpg" },
  { file: "music/desigirls/Chammak Challo.mp3", title: "Chammak Challo", cover: "images/desigirls/Chammak Challo.jpg" },
  { file: "music/desigirls/Kar Gayi Chull.mp3", title: "Kar Gayi Chull", cover: "images/desigirls/Kar Gayi Chull.jpg" },
  { file: "music/desigirls/Desi Girl.mp3", title: "Desi Girl", cover: "images/desigirls/Desi Girl.jpg" },
  { file: "music/desigirls/Bang Bang.mp3", title: "Bang Bang", cover: "images/desigirls/Bang Bang.jpg" },
  { file: "music/desigirls/Darling.mp3", title: "Darling", cover: "images/desigirls/Darling.jpg" },
  { file: "music/desigirls/Getup Jawani.mp3", title: "Getup Jawani", cover: "images/desigirls/Getup Jawani.jpg" },
  { file: "music/desigirls/Dhadhang Dhang.mp3", title: "Dhadhang Dhang", cover: "images/desigirls/Dhadhang Dhang.jpg" },
  { file: "music/desigirls/Kamli.mp3", title: "Kamli", cover: "images/desigirls/Kamli.jpg" },
  { file: "music/desigirls/Rani Tu Mein Raja.mp3", title: "Rani Tu Mein Raja", cover: "images/desigirls/Rani Tu Mein Raja.jpg" },
  { file: "music/desigirls/Pallo Latke.mp3", title: "Pallo Latke", cover: "images/desigirls/Pallo Latke.jpg" },
  { file: "music/desigirls/Yaar Naa Miley.mp3", title: "Yaar Naa Miley", cover: "images/desigirls/Yaar Naa Miley.jpg" },
  { file: "music/desigirls/Paani Waala Dance.mp3", title: "Paani Waala Dance", cover: "images/desigirls/Paani Waala Dance.jpg" },
  { file: "music/desigirls/Balma.mp3", title: "Balma", cover: "images/desigirls/Balma.jpg" },
  { file: "music/desigirls/Lazy Lamhe.mp3", title: "Lazy Lamhe", cover: "images/desigirls/Lazy Lamhe.jpg" },
  { file: "music/desigirls/Chamma Chamma.mp3", title: "Chamma Chamma", cover: "images/desigirls/Chamma Chamma.jpg" },
  { file: "music/desigirls/Aa Toh Sahi.mp3", title: "Aa Toh Sahi", cover: "images/desigirls/Aa Toh Sahi.jpg" }
];

let currentTrackIndex = null;
let isLooping = false;
let isShuffling = false;
let queue = [];

const audio = document.getElementById("audio-player");
const seekbar = document.getElementById("seekbar");
const volumeSlider = document.getElementById("volume");
const currentTime = document.getElementById("current-time");
const totalDuration = document.getElementById("total-duration");
const titleDisplay = document.getElementById("player-title");
const coverDisplay = document.getElementById("player-cover");
const playIcon = document.getElementById("play-icon");
const playerBar = document.getElementById("custom-player");
const queueModal = document.getElementById("queue-modal");
const queueContent = document.getElementById("queue-list");

function showPlayerBar() {
  playerBar.style.display = "flex";
}

function updatePlayer(track) {
  audio.src = track.file;
  titleDisplay.textContent = track.title;
  coverDisplay.src = track.cover;
  playIcon.src = "images/icons/pause.svg";
  showPlayerBar();
  audio.play();
}

function queueAndPlay(index) {
  currentTrackIndex = index;
  updatePlayer(playlist[index]);
}

function playSong(file, title, cover) {
  const index = playlist.findIndex(song => song.file === file);
  if (index !== -1) currentTrackIndex = index;
  updatePlayer({ file, title, cover });
}

function togglePlay() {
  buttonGlow("play-pause");
  if (audio.paused) {
    audio.play();
    playIcon.src = "images/icons/pause.svg";
  } else {
    audio.pause();
    playIcon.src = "images/icons/play.svg";
  }
}

function toggleLoop() {
  isLooping = !isLooping;
  document.getElementById("loop").classList.toggle("active-glow", isLooping);
}

function toggleShuffle() {
  isShuffling = !isShuffling;
  document.getElementById("shuffle").classList.toggle("active-glow", isShuffling);
}

function prevSong() {
  buttonGlow("prev");
  if (currentTrackIndex === null) return;
  if (isShuffling) {
    currentTrackIndex = Math.floor(Math.random() * playlist.length);
  } else {
    currentTrackIndex = (currentTrackIndex - 1 + playlist.length) % playlist.length;
  }
  updatePlayer(playlist[currentTrackIndex]);
}

function nextSong() {
  buttonGlow("next");
  if (queue.length > 0) {
    const track = queue.shift();
    currentTrackIndex = playlist.findIndex(s => s.file === track.file);
    updatePlayer(track);
    updateQueueDisplay();
  } else if (isShuffling) {
    currentTrackIndex = Math.floor(Math.random() * playlist.length);
    updatePlayer(playlist[currentTrackIndex]);
  } else {
    currentTrackIndex = currentTrackIndex === null ? 0 : (currentTrackIndex + 1) % playlist.length;
    updatePlayer(playlist[currentTrackIndex]);
  }
}

function addToQueue(index) {
  if (index >= 0 && index < playlist.length) {
    queue.push(playlist[index]);
    updateQueueDisplay();
  }
}

function updateQueueDisplay() {
  queueContent.innerHTML = queue.map(track => `
    <li class="queue-item">
      <img src="${track.cover}" class="queue-thumb" alt="">
      <span>${track.title}</span>
    </li>
  `).join("");
}

function showQueue() {
  queueModal.classList.remove("hidden");
}

function hideQueue() {
  queueModal.classList.add("hidden");
}

volumeSlider.addEventListener("input", () => {
  audio.volume = volumeSlider.value;
});

audio.addEventListener("timeupdate", () => {
  if (!audio.duration) return;
  seekbar.value = (audio.currentTime / audio.duration) * 100;
  currentTime.textContent = formatTime(audio.currentTime);
  totalDuration.textContent = formatTime(audio.duration);
});

seekbar.addEventListener("input", () => {
  if (audio.duration) {
    audio.currentTime = (seekbar.value / 100) * audio.duration;
  }
});

audio.addEventListener("ended", () => {
  if (isLooping) {
    updatePlayer(playlist[currentTrackIndex]);
  } else {
    nextSong();
  }
});

function formatTime(seconds) {
  const mins = Math.floor(seconds / 60);
  const secs = Math.floor(seconds % 60);
  return `${mins}:${secs.toString().padStart(2, "0")}`;
}

function buttonGlow(id) {
  const btn = document.getElementById(id);
  if (!btn) return;
  btn.classList.add("click-glow");
  setTimeout(() => btn.classList.remove("click-glow"), 300);
}

// Prevent Spotify/YT buttons from triggering song play
const songRows = document.querySelectorAll(".song-row");
songRows.forEach((row, index) => {
  const links = row.querySelectorAll("a");
  links.forEach(link => {
    link.addEventListener("click", e => e.stopPropagation());
  });
});
